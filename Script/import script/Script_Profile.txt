

ip hotspot user profile add name="user_Profile6"  on-login=":global datetime\r\n:global expiredatetime\r\n:local shiftDay 1\r\n:local shiftDate [ :parse [ /system script get func_shiftDate source ] ]\r\n:local montharray ( \"jan\", \"feb\", \"mar\", \"apr\", \"may\", \"jun\", \"jul\", \"aug\", \"sep\", \"oct\", \"nov\", \"dec\" )\r\n:local date [ /system clock get date ]\r\n:local date [ \$shiftDate\_\ date=\$date\_\ days=\$shiftDay\ ]\r\n:local day [ :pick \$date\_\ 4 6 ]\r\n:set day (\$day)\r\n:local monthtext [ :pick \$date\_\ 0 3 ]\r\n:local month ( [ :find \$montharray\_\ \$monthtext\ ] + 1)\r\n:local year [ :pick \$date\_\ 7 11 ]\r\n:if (\$month < 10) do={:set month (\"0\" . \$month);};\r\n:local timetext [ /system clock get time ]\r\n:local hour [ :pick \$timetext\_\ 0 2 ]\r\n:local minute [ pick \$timetext\_\ 3 5 ]\r\n:local second [ pick \$timetext\_\ 6 8 ]\r\n:set datetime ( \$year\ . \$month\ . \$day\ . \$time\ . \$hour\ . \$minute\ . \$second\ )\r\n:set expiredatetime ( \$year\ . \"-\" . \$month\ . \"-\" . \$day\ . \"\_\" . \$hour\ . \":\" . \$minute\ . \":\" . \$second\ )\r\n:local i [ /ip hotspot user find name=\$user]\r\n:local usercomment [ /ip hotspot user get \$i\_\ comment ]\r\n:if ( [ :find \$usercomment\_\ \"expire\" ] != 0 ) do={ [ /ip hotspot user set \$i\_\ comment=(\"expire=\" . \$expiredatetime) ] }"
